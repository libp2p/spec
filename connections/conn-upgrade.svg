<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="596px" preserveAspectRatio="none" style="width:860px;height:596px;" version="1.1" viewBox="0 0 860 596" width="860px" zoomAndPan="magnify"><defs><filter height="300%" id="fu4jvpultb024" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="347" y1="51.2969" y2="362.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="347" x2="347" y1="362.3594" y2="403.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="347" y1="403.1641" y2="534.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488.5" x2="488.5" y1="51.2969" y2="362.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="488.5" x2="488.5" y1="362.3594" y2="403.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488.5" x2="488.5" y1="403.1641" y2="534.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="315" y="47.9951">Initiator</text><ellipse cx="347" cy="19" fill="#FEFECE" filter="url(#fu4jvpultb024)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="335" x2="359" y1="33" y2="33"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="315" y="546.5576">Initiator</text><ellipse cx="347" cy="565.8594" fill="#FEFECE" filter="url(#fu4jvpultb024)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="335" x2="359" y1="579.8594" y2="579.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="454.5" y="47.9951">Receiver</text><ellipse cx="489" cy="19" fill="#FEFECE" filter="url(#fu4jvpultb024)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="477" x2="501" y1="33" y2="33"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="454.5" y="546.5576">Receiver</text><ellipse cx="489" cy="565.8594" fill="#FEFECE" filter="url(#fu4jvpultb024)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="477" x2="501" y1="579.8594" y2="579.8594"/><rect fill="#EEEEEE" filter="url(#fu4jvpultb024)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="845" x="3" y="81.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="848" y1="81.8633" y2="81.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="848" y1="84.8633" y2="84.8633"/><rect fill="#EEEEEE" filter="url(#fu4jvpultb024)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="218" x="316.5" y="71.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="322.5" y="87.3638">Initial protocol handshake</text><polygon fill="#A80036" points="477,121.5625,487,125.5625,477,129.5625,481,125.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="483" y1="125.5625" y2="125.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="354" y="120.4966">/multistream/1.0.0</text><polygon fill="#A80036" points="358,150.6953,348,154.6953,358,158.6953,354,154.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="352" x2="488" y1="154.6953" y2="154.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="364" y="149.6294">/multistream/1.0.0</text><rect fill="#EEEEEE" filter="url(#fu4jvpultb024)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="845" x="3" y="183.2617"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="848" y1="183.2617" y2="183.2617"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="848" y1="186.2617" y2="186.2617"/><rect fill="#EEEEEE" filter="url(#fu4jvpultb024)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="233" x="309" y="172.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="214" x="315" y="188.7622">Negotiate security protocol</text><polygon fill="#A80036" points="477,227.9609,487,231.9609,477,235.9609,481,231.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="483" y1="231.9609" y2="231.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="354" y="226.895">/tls/1.0.0</text><path d="M102,210.8281 L102,235.8281 L338,235.8281 L338,220.8281 L328,210.8281 L102,210.8281 " fill="#FBFB77" filter="url(#fu4jvpultb024)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M328,210.8281 L328,220.8281 L338,220.8281 L328,210.8281 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="108" y="227.895">Initiator proposes TLS for security</text><polygon fill="#A80036" points="358,267.0938,348,271.0938,358,275.0938,354,271.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="352" x2="488" y1="271.0938" y2="271.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="364" y="266.0278">na</text><path d="M494,249.9609 L494,274.9609 L736,274.9609 L736,259.9609 L726,249.9609 L494,249.9609 " fill="#FBFB77" filter="url(#fu4jvpultb024)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M726,249.9609 L726,259.9609 L736,259.9609 L726,249.9609 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="500" y="267.0278">Receiver does not support TLS yet</text><polygon fill="#A80036" points="477,306.2266,487,310.2266,477,314.2266,481,310.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="483" y1="310.2266" y2="310.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="354" y="305.1606">/secio/1.0.0</text><path d="M146,289.0938 L146,314.0938 L338,314.0938 L338,299.0938 L328,289.0938 L146,289.0938 " fill="#FBFB77" filter="url(#fu4jvpultb024)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M328,289.0938 L328,299.0938 L338,299.0938 L328,289.0938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="152" y="306.1606">Initiator falls back to SECIO</text><polygon fill="#A80036" points="358,345.3594,348,349.3594,358,353.3594,354,349.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="352" x2="488" y1="349.3594" y2="349.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="364" y="344.2935">/secio/1.0.0</text><path d="M494,328.2266 L494,353.2266 L832,353.2266 L832,338.2266 L822,328.2266 L494,328.2266 " fill="#FBFB77" filter="url(#fu4jvpultb024)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M822,328.2266 L822,338.2266 L832,338.2266 L822,328.2266 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="500" y="345.2935">Receiver supports SECIO, echoes back protocol id</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="367.5" y="386.5698">SECIO handshake</text><rect fill="#EEEEEE" filter="url(#fu4jvpultb024)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="845" x="3" y="423.7305"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="848" y1="423.7305" y2="423.7305"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="848" y1="426.7305" y2="426.7305"/><rect fill="#EEEEEE" filter="url(#fu4jvpultb024)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="246" x="302.5" y="413.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227" x="308.5" y="429.231">Negotiate stream multiplexer</text><polygon fill="#A80036" points="477,468.4297,487,472.4297,477,476.4297,481,472.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347" x2="483" y1="472.4297" y2="472.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="354" y="467.3638">/mplex/1.0.0</text><path d="M8,451.2969 L8,476.2969 L338,476.2969 L338,461.2969 L328,451.2969 L8,451.2969 " fill="#FBFB77" filter="url(#fu4jvpultb024)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M328,451.2969 L328,461.2969 L338,461.2969 L328,451.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="309" x="14" y="468.3638">Initiator proposes mplex for stream multiplexing</text><polygon fill="#A80036" points="358,507.5625,348,511.5625,358,515.5625,354,511.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="352" x2="488" y1="511.5625" y2="511.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="364" y="506.4966">/mplex/1.0.0</text><path d="M494,490.4297 L494,515.4297 L834,515.4297 L834,500.4297 L824,490.4297 L494,490.4297 " fill="#FBFB77" filter="url(#fu4jvpultb024)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M824,490.4297 L824,500.4297 L834,500.4297 L824,490.4297 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="500" y="507.4966">Receiver supports mplex, echoes back protocol id</text><!--MD5=[caf25a21bba5323ea53086b2110fe902]
@startuml
entity Initiator
entity Receiver

== Initial protocol handshake ==

Initiator -> Receiver: /multistream/1.0.0
Receiver -> Initiator: /multistream/1.0.0

== Negotiate security protocol ==

Initiator -> Receiver: /tls/1.0.0
note left: Initiator proposes TLS for security

Receiver -> Initiator: na
note right: Receiver does not support TLS yet

Initiator -> Receiver: /secio/1.0.0
note left: Initiator falls back to SECIO

Receiver -> Initiator: /secio/1.0.0
note right: Receiver supports SECIO, echoes back protocol id

... SECIO handshake ...

== Negotiate stream multiplexer ==

Initiator -> Receiver: /mplex/1.0.0
note left: Initiator proposes mplex for stream multiplexing

Receiver -> Initiator: /mplex/1.0.0
note right: Receiver supports mplex, echoes back protocol id
@enduml

PlantUML version 1.2020.16beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>